#summary Conventions de mapping des clefs JNDI.
#labels Phase-Implementation

= Conventions de mapping des clefs JNDI =

*jndi-resources* propose d'utiliser certaines conventions pour les clefs JNDI utilisées.
Ces liens successifs permettent le maximum de souplesse lors du déploiement. Il est possible de choisir tardivement si une ressource doit être [architecture locale ou globale], si elle doit être partagée avec une autre application, etc.

Pour vous rafraîchir la mémoire, consultez le [rappelJNDI rappel sur JNDI] pour comprendre la différence entre les branches java:comp/env, java: et /.

== Utilisation d'un annuaire JNDI local au serveur d'applications ==

|| *Clef* || *Valeur* || *Description* ||
|| `java:comp/env/`_<Ma clef>_ || `java:`_<idapp>_`/`_<Ma clef>_ || Mapping des clefs locales aux composants vers des clefs globales JVM préfixées par un identifiant. ||
|| `java:`_<idapp>_`/`_<Ma clef>_ || La ressource sauf pour les files JMS. || La ressource est directement publiée ici, sauf pour les clefs JMS. ||
|| `java:`_<idapp>_`/jms/`_<Ma clef>_ || `/`_<idapp>_`/jms/`_<Ma clef>_ || Les _queues_ et _topics_ JMS servent à plusieurs serveurs et doivent alors être publiés globalement. ||
|| `/`_<idapp>_`/jms/`_<Ma clef>_ || La ressource JMS. || La ressource JMS visible par tous. ||

Par exemple, pour la clef `java:comp/env/jdbc/MaDatabase` d'une application d'identité `MonApp`, le chemin suivit est le suivant :

`java:comp/env/jdbc/MaDatabase` => `java:MonApp/jdbc/MaDatabase` => La ressource.

Pour la clef `java:comp/env/jms/MaQueue` le chemin est le suivant :

`java:comp/env/jms/MaQueue` => `java:MonApp/jms/MaQueue` => `/MonApp/jms/MaQueue` => La ressource publiée par la file JMS.

== Utilisation d'un annuaire JNDI pour publier les ressources ==

|| *Clef* || *Valeur* || *Description* ||
|| `java:comp/env/`_<Ma clef>_ || Sans objet || Les composants ne sont pas publiés sur ce serveur. ||
|| `/`_<idapp>_`/`_<Ma clef>_ || La ressource. || Toute les ressources sont publiques et visibles par tous.||

Pour la clef `java:comp/env/jdbc/MaDatabase` d'une application d'identité `MonApp`, cliente de l'annuaire, le chemin suivi est le suivant :

`java:comp/env/jdbc/MaDatabase` => `java:MonApp/jdbc/MaDatabase` => `/MonApp/jdbc/MaDataBase` [_sur l'annuaire_] => La ressource [_sur l'annuaire_]

== Utilisation d'un annuaire JNDI distant ==
|| *Clef* || *Valeur* || *Description* ||
|| `java:comp/env/`_<Ma clef>_ || `java:`_<idapp>_`/`_<Ma clef>_ || Mapping des clefs locales aux composants vers une clef globale JVM. ||
|| `java:`_<idapp>_`/`_<Ma clef>_ || `/`_<idapp>_`/`_<Ma clef>_ || Les ressources sont toujours liées à une clef globale. ||

Pour la clef `java:comp/env/jdbc/MaDatabase` d'une application d'identité `MonApp`, cliente de l'annuaire, le chemin suivit est le suivant :

`java:comp/env/jdbc/MaDatabase` [_local_] => `java:MonApp/jdbc/MaDatabase` [_local_]=> `/MonApp/jdbc/MaDataBase` [_distant_] => La ressource


== Publication de queues JMS ==
|| *Clef* || *Valeur* || *Description* ||
|| `/`_<idapp>_`/jms/`_<Ma clef>_ || La ressource JMS. || La ressource visible par tous.||


*jndi-resource* ne publie des ressources que sous le scope `java:` ou `/`. Vous pouvez alors suivre les conventions que vous souhaitez pour mapper les clefs `java:comp/env`.

Précédent : [familles Les familles de ressources]
Suite: [ligneDeCommandes Lignes de commandes]